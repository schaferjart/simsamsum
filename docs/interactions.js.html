<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>interactions.js - Documentation</title>


    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >


    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="WorkflowVisualizer.html">WorkflowVisualizer</a><ul class='methods'><li data-type='method'><a href="WorkflowVisualizer.html#applyFilters">applyFilters</a></li><li data-type='method'><a href="WorkflowVisualizer.html#centerGraph">centerGraph</a></li><li data-type='method'><a href="WorkflowVisualizer.html#fitToScreen">fitToScreen</a></li><li data-type='method'><a href="WorkflowVisualizer.html#flipGraph">flipGraph</a></li><li data-type='method'><a href="WorkflowVisualizer.html#handleFileUpload">handleFileUpload</a></li><li data-type='method'><a href="WorkflowVisualizer.html#handleLayoutChange">handleLayoutChange</a></li><li data-type='method'><a href="WorkflowVisualizer.html#handleSizeToggle">handleSizeToggle</a></li><li data-type='method'><a href="WorkflowVisualizer.html#loadSampleData">loadSampleData</a></li><li data-type='method'><a href="WorkflowVisualizer.html#loadSavedLayout">loadSavedLayout</a></li><li data-type='method'><a href="WorkflowVisualizer.html#resetView">resetView</a></li><li data-type='method'><a href="WorkflowVisualizer.html#rotateGraph">rotateGraph</a></li><li data-type='method'><a href="WorkflowVisualizer.html#saveCurrentLayout">saveCurrentLayout</a></li><li data-type='method'><a href="WorkflowVisualizer.html#showConnectionReport">showConnectionReport</a></li><li data-type='method'><a href="WorkflowVisualizer.html#snapAllToGrid">snapAllToGrid</a></li><li data-type='method'><a href="WorkflowVisualizer.html#toggleGrid">toggleGrid</a></li><li data-type='method'><a href="WorkflowVisualizer.html#updateGridSize">updateGridSize</a></li><li data-type='method'><a href="WorkflowVisualizer.html#updateVisualization">updateVisualization</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#applyFilters">applyFilters</a></li><li><a href="global.html#applyLayout">applyLayout</a></li><li><a href="global.html#bindEventListeners">bindEventListeners</a></li><li><a href="global.html#calculateNodeSize">calculateNodeSize</a></li><li><a href="global.html#clearHighlight">clearHighlight</a></li><li><a href="global.html#downloadJsonFile">downloadJsonFile</a></li><li><a href="global.html#dragEnded">dragEnded</a></li><li><a href="global.html#dragStarted">dragStarted</a></li><li><a href="global.html#dragged">dragged</a></li><li><a href="global.html#exportToPDF">exportToPDF</a></li><li><a href="global.html#getBorderStyle">getBorderStyle</a></li><li><a href="global.html#handleResize">handleResize</a></li><li><a href="global.html#handleZoom">handleZoom</a></li><li><a href="global.html#hideDetailsPanel">hideDetailsPanel</a></li><li><a href="global.html#highlightNode">highlightNode</a></li><li><a href="global.html#initVisualization">initVisualization</a></li><li><a href="global.html#initializeApp">initializeApp</a></li><li><a href="global.html#parseCSV">parseCSV</a></li><li><a href="global.html#processData">processData</a></li><li><a href="global.html#renderVisualizationElements">renderVisualizationElements</a></li><li><a href="global.html#resetUI">resetUI</a></li><li><a href="global.html#showNodeDetails">showNodeDetails</a></li><li><a href="global.html#showStatus">showStatus</a></li><li><a href="global.html#snapToGrid">snapToGrid</a></li><li><a href="global.html#toggleGridControls">toggleGridControls</a></li><li><a href="global.html#updateGridDisplay">updateGridDisplay</a></li><li><a href="global.html#updateGridSizeLabel">updateGridSizeLabel</a></li><li><a href="global.html#updateGridUI">updateGridUI</a></li><li><a href="global.html#updatePositions">updatePositions</a></li><li><a href="global.html#updateTextRotation">updateTextRotation</a></li><li><a href="global.html#verifyConnections">verifyConnections</a></li></ul>

</nav>

<div id="main">

    <h1 class="page-title">interactions.js</h1>







    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { snapToGrid } from './utils.js';
import { highlightNode as renderHighlight, clearHighlight as renderClearHighlight } from './render.js';

/**
 * Handles the start of a drag event on a node.
 * @param {object} event - The D3 drag event.
 * @param {object} d - The node data.
 * @param {object} simulation - The D3 simulation instance.
 * @param {string} currentLayout - The current layout type.
 */
export function dragStarted(event, d, simulation, currentLayout) {
    console.log(`ðŸ”¥ Drag started for node: ${d.id}, layout: ${currentLayout}`);
    if (currentLayout !== 'manual-grid') {
        if (!event.active) simulation.alphaTarget(0.3).restart();
    }
    d.fx = d.x;
    d.fy = d.y;
}

/**
 * Handles the dragging of a node.
 * @param {object} event - The D3 drag event.
 * @param {object} d - The node data.
 * @param {string} currentLayout - The current layout type.
 * @param {number} gridSize - The grid size for snapping.
 */
export function dragged(event, d, currentLayout, gridSize) {
    if (currentLayout === 'manual-grid') {
        const snapped = snapToGrid(event.x, event.y, gridSize);
        d.fx = snapped.x;
        d.fy = snapped.y;
    } else {
        d.fx = event.x;
        d.fy = event.y;
    }
}

/**
 * Handles the end of a drag event on a node.
 * @param {object} event - The D3 drag event.
 * @param {object} d - The node data.
 * @param {object} simulation - The D3 simulation instance.
 * @param {string} currentLayout - The current layout type.
 */
export function dragEnded(event, d, simulation, currentLayout) {
    if (currentLayout === 'manual-grid') {
        // Keep position fixed in manual mode
        d.fx = d.x;
        d.fy = d.y;
    } else {
        if (simulation &amp;&amp; !event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
    }
}

/**
 * Applies search and filter criteria to the node set.
 * @param {string} searchQuery - The search query string.
 * @param {string} typeFilter - The selected type filter.
 * @param {string} executionFilter - The selected execution filter.
 * @param {Array&lt;Object>} allNodes - The complete list of nodes.
 * @param {Array&lt;Object>} allLinks - The complete list of links.
 * @returns {{filteredNodes: Array&lt;Object>, filteredLinks: Array&lt;Object>}}
 */
export function applyFilters(searchQuery, typeFilter, executionFilter, allNodes, allLinks) {
    let filteredNodes = [...allNodes];

    if (searchQuery) {
        filteredNodes = filteredNodes.filter(node =>
            node.Name.toLowerCase().includes(searchQuery.toLowerCase())
        );
    }

    if (typeFilter) {
        filteredNodes = filteredNodes.filter(node => node.Type === typeFilter);
    }

    if (executionFilter) {
        filteredNodes = filteredNodes.filter(node => node.Execution === executionFilter);
    }

    const filteredIds = new Set(filteredNodes.map(n => n.id));
    const filteredLinks = allLinks.filter(link =>
        filteredIds.has(link.source.id || link.source) &amp;&amp;
        filteredIds.has(link.target.id || link.target)
    );

    return { filteredNodes, filteredLinks };
}

/**
 * Handles highlighting a node and its connections.
 * @param {d3.Selection} g - The main D3 group for rendering.
 * @param {object} selectedNode - The node to highlight.
 * @param {Array&lt;Object>} links - The array of all links.
 */
export function highlightNode(g, selectedNode, links) {
    renderHighlight(g, selectedNode, links);
}

/**
 * Clears all node and link highlighting.
 * @param {d3.Selection} g - The main D3 group for rendering.
 */
export function clearHighlight(g) {
    renderClearHighlight(g);
}

/**
 * Handles the zoom event from D3.
 * @param {object} event - The D3 zoom event.
 * @param {d3.Selection} zoomGroup - The D3 group to apply the transform to.
 */
export function handleZoom(event, zoomGroup) {
    zoomGroup.attr('transform', event.transform);
}

/**
 * Handles window resize events.
 * @param {object} state - The application state.
 * @param {d3.Selection} svg - The main SVG element.
 */
export function handleResize(state, svg) {
    const container = document.getElementById('networkGraph');
    state.width = container.clientWidth;
    state.height = container.clientHeight;

    svg.attr('width', state.width).attr('height', state.height);

    if (state.simulation) {
        state.simulation.force('center', d3.forceCenter(state.width / 2, state.height / 2));
        state.simulation.alpha(0.3).restart();
    }
}</code></pre>
        </article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri Sep 26 2025 13:40:40 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
